<!DOCTYPE html>
<html>
    <head>
        <link href="main.css" rel="stylesheet" type="text/css">
        <script>
            // Global variable with lines
            var lineIndex = []

            //Draw the edges of the canvas as lines
            function drawEdges()
            {

                // Draw Edges
                var canvas = document.getElementById("myCanvas");
                canvas.width = canvas.width;
                var ctx = canvas.getContext("2d");
                ctx.beginPath();
                ctx.moveTo(0, 0);
                ctx.lineTo(0, 400);
                ctx.lineTo(400, 400);
                ctx.lineTo(400, 0);
                ctx.lineTo(0, 0);
                ctx.stroke();

                // Push edgeLines to the line Index
                lineIndex.push([0,0,0,400,findSlope(0,0,0,400)]);
                lineIndex.push([0,400,400,400,findSlope(0,400,400,400)]);
                lineIndex.push([400,400,400,0,findSlope(400,400,400,0)]);
                lineIndex.push([400,0,0,0,findSlope(400,0,0,0)]);
                
                // Make Variable Coordinates
                // x,y is current mouse location
                // xi, yi is start location
                // xe, ye is end location
                var x, y, xi, yi, xe, ye;
                var size = 4;

                // line Index layout
                // 0 [xi,yi,xe,ye,slope]
                // 1 [xi,yi,xe,ye,slope]
                // 2 [xi,yi,xe,ye,slope]

                // Track variable coordinates on mousemove relevant to canvas
                canvas.onmousemove = function(event) {
                    x = event.pageX - this.offsetLeft;
                    y = event.pageY - this.offsetTop;
                }

                // function that gets called on mousedown in canvas
                canvas.addEventListener("mousedown", function(){
                    console.log('('+x+','+y+')');
                    ctx.beginPath();
                    ctx.moveTo(x,y);
                    xi = x;
                    yi = y;
                });

                // function that gets called on mouseup in canvas
                canvas.addEventListener("mouseup", function(){
                    console.log('('+x+','+y+')');
                    ctx.lineTo(x,y);
                    ctx.stroke();
                    xe = x;
                    ye = y;
                    lineIndex.push([xi,yi,xe,ye,findSlope(xi,yi,xe,ye)]);
                    console.log("stored line");
                    console.log(lineIndex[size][0]);
                    console.log(lineIndex[size][1]);
                    console.log(lineIndex[size][2]);
                    console.log(lineIndex[size][3]);
                    console.log(lineIndex[size][4]);
                    size++;
                });
            }

            // function finds and returns the slope of the line segment
            function findSlope(xi, yi, xe, ye){
                var slope = ((ye - yi)/(xe -xi));
                return slope;
            }

            function findIntersections(){
                // still need to figure this out.
                
            }
        </script>
    </head>
    <body onload="drawEdges();">
        <!-- Navigation Bar On Top -->
        <div class="topnav">
            <a href="/">Home</a>
            <a href="/page2">Page 2</a>
            <a class="active" href="/page3">Page 3</a>
        </div>
        <h1>Draw lines to calculate triangles</h1>
        <!-- Blank Canvas -->
        <div class="boxCanvas">
            <canvas id="myCanvas" width="400" height="400"></canvas>
        </div>
    </body>
</html>